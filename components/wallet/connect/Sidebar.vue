<script lang='ts' setup>

defineProps<{ isOpen: boolean }>()

const emit = defineEmits(['close'])

const chainId = useChainId()

const { connectors, connect, status, error } = useConnect()

watch(status, (newStatus) => {
    if (newStatus == 'success') {
        emit('close')
    }
})

const icons: any = {
    'walletConnect': '<svg height="34" width="34" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg"><path d="M58.5 32c0 14.636-11.864 26.5-26.5 26.5S5.5 46.636 5.5 32 17.364 5.5 32 5.5 58.5 17.364 58.5 32z" fill="#fff" stroke="#F2F5FA"></path><path d="M21.37 25.298c5.87-5.73 15.39-5.73 21.26 0l.707.69a.722.722 0 010 1.038l-2.417 2.36a.382.382 0 01-.532 0l-.972-.95c-4.096-3.998-10.736-3.998-14.832 0l-1.041 1.017a.382.382 0 01-.532 0l-2.417-2.36a.722.722 0 010-1.038l.776-.757zm26.259 4.88l2.15 2.1a.721.721 0 010 1.038l-9.699 9.47a.765.765 0 01-1.063 0l-6.884-6.721a.191.191 0 00-.266 0l-6.884 6.72a.765.765 0 01-1.063 0l-9.7-9.47a.721.721 0 010-1.037l2.151-2.1a.765.765 0 011.063 0l6.885 6.72a.191.191 0 00.265 0l6.884-6.72a.765.765 0 011.063 0l6.885 6.72a.191.191 0 00.266 0l6.884-6.72a.765.765 0 011.063 0z" fill="#3B99FC"></path></svg>',
    'io.metamask': '<svg  height="34" width="34" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64" class="css-1nomc0u-icon"><path d="M51.263 12L34.557 24.213l3.103-7.205L51.263 12z" fill="#E2761B" stroke="#E2761B" stroke-linecap="round" stroke-linejoin="round"></path><path d="M12.736 12l16.555 12.329-2.952-7.321L12.736 12zM45.261 40.31l-4.445 6.71 9.51 2.578 2.718-9.14-7.783-.148zM10.975 40.459l2.7 9.139 9.51-2.578-4.428-6.71-7.782.149z" fill="#E4761B" stroke="#E4761B" stroke-linecap="round" stroke-linejoin="round"></path><path d="M22.666 28.973l-2.65 3.95 9.426.413-.319-9.999-6.457 5.636zM41.333 28.973l-6.558-5.751-.218 10.114 9.426-.413-2.65-3.95zM23.188 47.02l5.686-2.727-4.898-3.768-.788 6.495zM35.129 44.294l5.686 2.726-.788-6.495-4.898 3.769z" fill="#E4761B" stroke="#E4761B" stroke-linecap="round" stroke-linejoin="round"></path><path d="M40.813 47.02l-5.686-2.727.453 3.652-.05 1.537 5.283-2.462zM23.186 47.02l5.283 2.462-.034-1.537.437-3.652-5.686 2.727z" fill="#D7C1B3" stroke="#D7C1B3" stroke-linecap="round" stroke-linejoin="round"></path><path d="M28.57 38.112l-4.73-1.372 3.338-1.503 1.392 2.875zM35.432 38.112l1.392-2.875 3.354 1.503-4.746 1.372z" fill="#233447" stroke="#233447" stroke-linecap="round" stroke-linejoin="round"></path><path d="M23.188 47.02l.822-6.71-5.25.149 4.428 6.561zM39.994 40.31l.822 6.71 4.445-6.561-5.267-.149zM43.987 32.923l-9.427.413.873 4.776 1.392-2.875 3.354 1.503 3.808-3.817zM23.842 36.74l3.338-1.503 1.392 2.875.872-4.776-9.426-.413 3.824 3.817z" fill="#CD6116" stroke="#CD6116" stroke-linecap="round" stroke-linejoin="round"></path><path d="M20.016 32.923l3.958 7.602-.134-3.785-3.824-3.817zM40.176 36.74l-.15 3.785 3.958-7.602-3.808 3.817zM29.442 33.336l-.872 4.776 1.107 5.636.235-7.42-.47-2.992zM34.558 33.336l-.453 2.975.219 7.437 1.107-5.636-.873-4.776z" fill="#E4751F" stroke="#E4751F" stroke-linecap="round" stroke-linejoin="round"></path><path d="M35.43 38.112l-1.108 5.636.805.545 4.898-3.768.151-3.785-4.747 1.372zM23.84 36.74l.134 3.785 4.898 3.768.805-.545-1.107-5.636-4.73-1.372z" fill="#F6851B" stroke="#F6851B" stroke-linecap="round" stroke-linejoin="round"></path><path d="M35.53 49.482l.05-1.537-.418-.363h-6.324l-.402.363.033 1.537-5.284-2.462 1.846 1.487 3.757 2.562h6.424l3.757-2.562 1.845-1.487-5.283 2.462z" fill="#C0AD9E" stroke="#C0AD9E" stroke-linecap="round" stroke-linejoin="round"></path><path d="M35.13 44.293l-.805-.546h-4.646l-.805.546-.436 3.652.402-.364h6.323l.42.364-.453-3.652z" fill="#161616" stroke="#161616" stroke-linecap="round" stroke-linejoin="round"></path><path d="M51.967 25.006l1.41-6.742L51.262 12 35.127 23.8l6.206 5.173 8.772 2.528 1.93-2.23-.84-.596 1.343-1.206-1.024-.793 1.342-1.008-.889-.662zM10.623 18.264l1.426 6.742-.906.662 1.342 1.008-1.023.793 1.342 1.206-.84.595 1.93 2.231 8.772-2.528 6.206-5.173L12.736 12l-2.113 6.264z" fill="#763D16" stroke="#763D16" stroke-linecap="round" stroke-linejoin="round"></path><path d="M50.106 31.502l-8.772-2.53 2.65 3.95-3.959 7.603 5.234-.066h7.782L50.106 31.5zM22.666 28.973l-8.773 2.529-2.918 8.957h7.782l5.217.066-3.959-7.602 2.65-3.95zM34.559 33.336l.57-9.536 2.533-6.793H26.34l2.533 6.793.57 9.536.218 3.008.017 7.403h4.646l.017-7.404.218-3.007z" fill="#F6851B" stroke="#F6851B" stroke-linecap="round" stroke-linejoin="round"></path></svg>',
    'com.brave.wallet': '<svg height="34" width="34" viewBox="0 0 56 64" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M53.292 15.321l1.5-3.676s-1.909-2.043-4.227-4.358c-2.317-2.315-7.225-.953-7.225-.953L37.751 0H18.12l-5.589 6.334s-4.908-1.362-7.225.953C2.988 9.602 1.08 11.645 1.08 11.645l1.5 3.676-1.91 5.447s5.614 21.236 6.272 23.83c1.295 5.106 2.181 7.08 5.862 9.668 3.68 2.587 10.36 7.08 11.45 7.762 1.091.68 2.455 1.84 3.682 1.84 1.227 0 2.59-1.16 3.68-1.84 1.091-.681 7.77-5.175 11.452-7.762 3.68-2.587 4.567-4.562 5.862-9.668.657-2.594 6.27-23.83 6.27-23.83l-1.908-5.447z" fill="url(#paint0_linear)"/><path fill-rule="evenodd" clip-rule="evenodd" d="M34.888 11.508c.818 0 6.885-1.157 6.885-1.157s7.189 8.68 7.189 10.536c0 1.534-.619 2.134-1.347 2.842-.152.148-.31.3-.467.468l-5.39 5.717a9.42 9.42 0 01-.176.18c-.538.54-1.33 1.336-.772 2.658l.115.269c.613 1.432 1.37 3.2.407 4.99-1.025 1.906-2.78 3.178-3.905 2.967-1.124-.21-3.766-1.589-4.737-2.218-.971-.63-4.05-3.166-4.05-4.137 0-.809 2.214-2.155 3.29-2.81.214-.13.383-.232.48-.298.111-.075.297-.19.526-.332.981-.61 2.754-1.71 2.799-2.197.055-.602.034-.778-.758-2.264-.168-.316-.365-.654-.568-1.004-.754-1.295-1.598-2.745-1.41-3.784.21-1.173 2.05-1.845 3.608-2.415.194-.07.385-.14.567-.209l1.623-.609c1.556-.582 3.284-1.229 3.57-1.36.394-.181.292-.355-.903-.468a54.655 54.655 0 01-.58-.06c-1.48-.157-4.209-.446-5.535-.077-.261.073-.553.152-.86.235-1.49.403-3.317.897-3.493 1.182-.03.05-.06.093-.089.133-.168.238-.277.394-.091 1.406.055.302.169.895.31 1.629.41 2.148 1.053 5.498 1.134 6.25.011.106.024.207.036.305.103.84.171 1.399-.805 1.622l-.255.058c-1.102.252-2.717.623-3.3.623-.584 0-2.2-.37-3.302-.623l-.254-.058c-.976-.223-.907-.782-.804-1.622.012-.098.024-.2.035-.305.081-.753.725-4.112 1.137-6.259.14-.73.253-1.32.308-1.62.185-1.012.076-1.168-.092-1.406a3.743 3.743 0 01-.09-.133c-.174-.285-2-.779-3.491-1.182-.307-.083-.6-.162-.86-.235-1.327-.37-4.055-.08-5.535.077-.226.024-.422.045-.58.06-1.196.113-1.297.287-.903.468.285.131 2.013.778 3.568 1.36.597.223 1.17.437 1.624.609.183.069.373.138.568.21 1.558.57 3.398 1.241 3.608 2.414.187 1.039-.657 2.489-1.41 3.784-.204.35-.4.688-.569 1.004-.791 1.486-.812 1.662-.757 2.264.044.488 1.816 1.587 2.798 2.197.229.142.415.257.526.332.098.066.266.168.48.298 1.076.654 3.29 2 3.29 2.81 0 .97-3.078 3.507-4.05 4.137-.97.63-3.612 2.008-4.737 2.218-1.124.21-2.88-1.061-3.904-2.966-.963-1.791-.207-3.559.406-4.99l.115-.27c.559-1.322-.233-2.118-.772-2.658a9.377 9.377 0 01-.175-.18l-5.39-5.717c-.158-.167-.316-.32-.468-.468-.728-.707-1.346-1.308-1.346-2.842 0-1.855 7.189-10.536 7.189-10.536s6.066 1.157 6.884 1.157c.653 0 1.913-.433 3.227-.885.333-.114.669-.23 1-.34 1.635-.545 2.726-.549 2.726-.549s1.09.004 2.726.549c.33.11.667.226 1 .34 1.313.452 2.574.885 3.226.885zm-1.041 30.706c1.282.66 2.192 1.128 2.536 1.343.445.278.174.803-.232 1.09-.405.285-5.853 4.499-6.381 4.965l-.215.191c-.509.459-1.159 1.044-1.62 1.044-.46 0-1.11-.586-1.62-1.044l-.213-.191c-.53-.466-5.977-4.68-6.382-4.966-.405-.286-.677-.81-.232-1.09.344-.214 1.255-.683 2.539-1.344l1.22-.629c1.92-.992 4.315-1.837 4.689-1.837.373 0 2.767.844 4.689 1.837.436.226.845.437 1.222.63z" fill="#fff"/><path fill-rule="evenodd" clip-rule="evenodd" d="M43.34 6.334L37.751 0H18.12l-5.589 6.334s-4.908-1.362-7.225.953c0 0 6.544-.59 8.793 3.064 0 0 6.066 1.157 6.884 1.157.818 0 2.59-.68 4.226-1.225 1.636-.545 2.727-.549 2.727-.549s1.09.004 2.726.549 3.408 1.225 4.226 1.225c.818 0 6.885-1.157 6.885-1.157 2.249-3.654 8.792-3.064 8.792-3.064-2.317-2.315-7.225-.953-7.225-.953z" fill="url(#paint1_linear)"/><defs><linearGradient id="paint0_linear" x1=".671" y1="64.319" x2="55.2" y2="64.319" gradientUnits="userSpaceOnUse"><stop stop-color="#F50"/><stop offset=".41" stop-color="#F50"/><stop offset=".582" stop-color="#FF2000"/><stop offset="1" stop-color="#FF2000"/></linearGradient><linearGradient id="paint1_linear" x1="6.278" y1="11.466" x2="50.565" y2="11.466" gradientUnits="userSpaceOnUse"><stop stop-color="#FF452A"/><stop offset="1" stop-color="#FF2000"/></linearGradient></defs></svg>',
}

</script>

<template>

    <Menu :is-open="isOpen" @close="emit('close')">

        <div class="mt-8">

            <span class="flex justify-center mb-2 text-xl font-medium text-black">Connect wallet to continue</span>

            <ul class="space-y-2 font-medium">

                <li v-for="connector in connectors"
                    :key="connector.uid"
                    @click="connect({ connector, chainId })"
                >
                    <div class="flex cursor-pointer items-center p-2 group rounded-xl w-full duration-300 border-2 text-black border-gray-100 hover:bg-gray-100" target="_blank">

                        <div v-html="icons[connector.id]"></div>

                        <span class="ms-3 group-hover:text-secondary">{{ connector.name }}</span>
                    </div>
                </li>

            </ul>
            
        </div>

    </Menu>
    
</template>
